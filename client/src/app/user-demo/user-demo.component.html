<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="card">
  <div class="flex justify-content-between align-items-center mb-3">
    <h2 class="m-0">User Management</h2>
    <button pButton label="New User" icon="pi pi-plus" class="p-button-success" (click)="openNew()"></button>
  </div>

  <p-table [value]="users" [paginator]="true" [rows]="5" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>userEmail</th>
        <th>City</th>
        <th>Country</th>
        <th>Gender</th>
        <th>Age</th>
        <th>Known As</th>
        <th>Looking For</th>
        <th>Photo URL</th>
        <th>Date of Birth</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.userName }}</td>
        <td>{{ user.userEmail }}</td>
        <td>{{ user.city}}</td>
        <td>{{ user.country }}</td>
        <td>{{ user.gender}}</td>
        <td>{{ user.age }}</td>
        <td>{{ user.knownAs }}</td>
        <td>{{ user.lokingFor }}</td>
        <td>{{ user.photoUrl }}</td>
        <td>{{ user.dateOfBirth | date:'yyyy-MM-dd' }}</td>
        <td>
          <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-info me-2" (click)="editUser(user)"></button>
          <button pButton icon="pi pi-trash" class="p-button-rounded p-button-danger" (click)="deleteUser(user)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-dialog header="{{ user.id }}" [(visible)]="userDialog" [modal]="true" [closable]="false" [style]="{ width: '30vw' }">
  <div class="field">
    <label for="username">Username</label>
    <input id="username" type="text" pInputText [(ngModel)]="user.userName" placeholder="Enter username" required autofocus>
    <small *ngIf="submitted && !user.userName" class="p-error">Username is required.</small>
  </div>
  <div class="field">
    <label for="email">Email</label>
    <input id="email" type="email" pInputText [(ngModel)]="user.userEmail" placeholder="Enter email" required>
    <small *ngIf="submitted && !user.userEmail" class="p-error">Email is required.</small>
  </div>
  <div class="field">
    <label for="city">City</label>
    <input id="city" type="text" pInputText [(ngModel)]="user.city" placeholder="Enter city">
    <small *ngIf="submitted && !user.city" class="p-error">City is required.</small>
  </div>
  <div class="field">
    <label for="country">Country</label>
    <input id="country" type="text" pInputText [(ngModel)]="user.country" placeholder="Enter country">
    <small *ngIf="submitted && !user.country" class="p-error">Country is required.</small>
  </div>
  <div class="field">
    <label for="gender">Gender</label>
    <input id="gender" type="text" pInputText [(ngModel)]="user.gender" placeholder="Enter gender">
    <small *ngIf="submitted && !user.gender" class="p-error">Gender is required.</small>    
  </div>
  <div calss="field">
    <label for="age">Age</label>
    <input id="age" type="number" pInputText [(ngModel)]="user.age" placeholder="Enter age">
    <small *ngIf="submitted && !user.age" class="p-error">Age is required.</small>
  </div>
  <div class="field">
    <label for="knownAs">Known As</label>
    <input id="knownAs" type="text" pInputText [(ngModel)]="user.knownAs" placeholder="Enter known as">
    <small *ngIf="submitted && !user.knownAs" class="p-error">Known As is required.</small>
  </div>
  <div class="field">
    <label for="lookingFor">Looking For</label>
    <input id="lookingFor" type="text" pInputText [(ngModel)]="user.lokingFor" placeholder="Enter looking for">
    <small *ngIf="submitted && !user.lokingFor" class="p-error">Looking For is required.</small>
  </div>
  <div class="field">
    <label for="photoUrl">Photo URL</label>
    <input id="photoUrl" type="text" pInputText [(ngModel)]="user.photoUrl" placeholder="Enter photo URL">
    <small *ngIf="submitted && !user.photoUrl" class="p-error">Photo URL is required.</small>
  </div>  
  <div class="field">
    <label for="dateOfBirth">Date of Birth</label>
    <input id="dateOfBirth" type="date" pInputText [(ngModel)]="user.dateOfBirth" placeholder="Enter date of birth">
    <small *ngIf="submitted && !user.dateOfBirth" class="p-error">Date of Birth is required.</small>
  </div>
  <div class="flex justify-content-end gap-2 mt-3">
    <button pButton label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
    <button pButton label="Save" icon="pi pi-check" class="p-button-primary" (click)="saveUser()"></button>
  </div>
</p-dialog>
